###########################################################################################################################
####################################################     LIBRARIES     ####################################################
###########################################################################################################################

import os
import sys
import cv2
import json
import random
import unittest
import numpy as np
from parameterized import parameterized_class

sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '../')))

from Modules.Game_Capture import Game_Capture
import Constants as CONST

###########################################################################################################################
#################################################     INITIALIZATIONS     #################################################
###########################################################################################################################

# Define absolute paths to required resources
TESTS_DATA_FILE = os.path.abspath(os.path.join(os.path.dirname(__file__), 'Tests Data/Game_Capture_Data.json'))

# Load test case definitions from JSON
with open(TESTS_DATA_FILE, 'r') as file: 
    TEST_DATA = json.load(file)

###########################################################################################################################
###########################################################################################################################

@parameterized_class(TEST_DATA)
class Test_Game_Capture(unittest.TestCase):
    def setUp(self):
        return

    #######################################################################################################################
    #######################################################################################################################

    def test_get_frame(self):

        Video_Capture = Game_Capture(CONST.VIDEO_CAPTURE_INDEX)

        self.assertTrue(Video_Capture.video_capture.isOpened(), 'Could not access any video capture')

###########################################################################################################################
#####################################################     PROGRAM     #####################################################
###########################################################################################################################

if __name__ == '__main__':
    unittest.main()